AWSTemplateFormatVersion: "2010-09-09"
Description: Minimal template to create AWS::ElasticLoadBalancingV2::LoadBalancer

Parameters:
  AvailabilityZoneOne:
    Type: AWS::EC2::AvailabilityZone::Name

  AvailabilityZoneTwo:
    Type: AWS::EC2::AvailabilityZone::Name

Resources:
  InternetGateway:
    Type: AWS::EC2::InternetGateway

  VPC:
    Type: AWS::EC2::VPC
    Properties:
      # WARNING: these are not sane defaults for production; this is a minimal example
      CidrBlock: 192.168.0.0/24

  VPCGatewayAttachment:
    Type: AWS::EC2::VPCGatewayAttachment
    Properties:
      InternetGatewayId: !Ref InternetGateway
      VpcId: !Ref VPC

  SubnetAZ1:
    Type: AWS::EC2::Subnet
    Properties:
      VpcId: !Ref VPC
      # WARNING: these are not sane defaults for production; this is a minimal example
      CidrBlock: 192.168.0.0/28
      AvailabilityZone: !Ref AvailabilityZoneOne

  SubnetAZ2:
    Type: AWS::EC2::Subnet
    Properties:
      VpcId: !Ref VPC
      # WARNING: these are not sane defaults for production; this is a minimal example
      CidrBlock: 192.168.0.16/28
      AvailabilityZone: !Ref AvailabilityZoneTwo

  LoadBalancer:
    Type: AWS::ElasticLoadBalancingV2::LoadBalancer
    Properties:
      Subnets:
      - Ref: SubnetAZ1
      - Ref: SubnetAZ2
