AWSTemplateFormatVersion: "2010-09-09"
Description: Minimal template to create AWS::AutoScaling::ScheduledAction

Parameters:
  ImageId:
    Type: AWS::EC2::Image::Id

  InstanceType:
    Type: String
    Default: t2.micro
    AllowedValues:
      - t2.nano
      - t2.micro
      - m1.small
    Description: Choose an instance type that is available in your region

Resources:
  LaunchConfiguration:
    Type: AWS::AutoScaling::LaunchConfiguration
    Properties:
      ImageId: !Ref ImageId
      InstanceType: !Ref InstanceType

  AutoScalingGroup:
    Type: AWS::AutoScaling::AutoScalingGroup
    Properties:
      LaunchConfigurationName: !Ref LaunchConfiguration
      # WARNING: these are not sane defaults for production; this is a minimal example
      MinSize: "0"
      MaxSize: "1"
      AvailabilityZones: !GetAZs ""

  ScheduledAction:
    Type: AWS::AutoScaling::ScheduledAction
    Properties:
      AutoScalingGroupName: !Ref AutoScalingGroup
      # WARNING: these are not sane defaults for production; this is a minimal example
      StartTime: "2020-01-01T00:00:00Z"
      MinSize: 0
